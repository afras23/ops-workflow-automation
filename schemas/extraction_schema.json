{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "ExtractionSchema",
    "type": "object",
    "additionalProperties": false,
    "required": ["request_id", "request_type", "priority", "requester", "description", "confidence"],
    "properties": {
      "request_id": { "type": "string", "minLength": 6 },
      "request_type": {
        "type": "string",
        "enum": ["purchase_request", "customer_issue", "ops_change", "general_inquiry", "other"]
      },
      "priority": { "type": "string", "enum": ["low", "medium", "high", "urgent"] },
      "due_date": { "type": ["string", "null"], "description": "ISO date YYYY-MM-DD" },
      "company": { "type": ["string", "null"] },
      "requester": {
        "type": "object",
        "additionalProperties": false,
        "required": ["name", "email"],
        "properties": {
          "name": { "type": "string" },
          "email": { "type": "string" }
        }
      },
      "description": { "type": "string", "minLength": 10 },
      "line_items": {
        "type": "array",
        "items": {
          "type": "object",
          "additionalProperties": false,
          "required": ["item", "qty"],
          "properties": {
            "item": { "type": "string" },
            "qty": { "type": "integer", "minimum": 1 },
            "notes": { "type": ["string", "null"] }
          }
        }
      },
      "confidence": { "type": "number", "minimum": 0, "maximum": 1 },
      "extraction_notes": { "type": "array", "items": { "type": "string" } }
    }
  }
  